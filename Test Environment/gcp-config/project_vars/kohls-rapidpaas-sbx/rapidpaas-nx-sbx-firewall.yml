---
vpcs:
  rapidpaas-nx-sbx:
    firewallRules:
      allow-all-egress:
        priority: 900
        direction: EGRESS
        description: RAPP-106
        disabled: false
        logging: false
        rule:
          destinationRanges:
          - "0.0.0.0/0"
          targetServiceAccounts:
          targetTags:
          sourceRanges:
          sourceServiceAccounts:
          sourceTags:
          allow:
          - protocol: "tcp"
          - protocol: "udp"
      allow-gitlab-ingress:
        priority: 900
        direction: INGRESS
        description: RAPP-106
        disabled: false
        logging: false
        rule:
          destinationRanges:
          targetServiceAccounts:
          targetTags:
          sourceRanges:
          - "34.74.90.64/28"
          - "34.74.226.0/24"
          sourceServiceAccounts:
          sourceTags:
          allow:
          - protocol: "tcp"
      allow-doms-ingress:
        priority: 900
        direction: INGRESS
        description: RAPP-106
        disabled: false
        logging: true
        rule:
          destinationRanges:
          targetServiceAccounts:
          targetTags:
          sourceRanges:
          - "66.232.224.0/20"
          sourceServiceAccounts:
          sourceTags:
          allow:
          - protocol: "tcp"
          - protocol: "udp"
      # TODO: Add target service accounts for this rule will have to change when "final" cluster is built
      #       See https://jiradc.doms.com:8443/browse/RAPP-155
      allow-internal-api:
        priority: 900
        direction: INGRESS
        description: allow OCP nodes to access api on private network
        disabled: false
        logging: false
        rule:
          destinationRanges:
          targetServiceAccounts:
          targetTags:
          sourceRanges:
          - "192.168.1.0/24"
          sourceServiceAccounts:
          sourceTags:
          allow:
          - protocol: "tcp"
            ports:
            - "6443"
