---
vpcs:
  platform-nx-lle:
    firewallRules:
      maas-ops-kafka-allow-openshift-lle-prv01:
        priority: 900
        direction: INGRESS
        description: Allow openshift lle to maas ops servers for gitlab runners
        disabled: false
        logging: false
        rule:
          destinationRanges:
          targetServiceAccounts:
          - external: "kafkaplatform-msg@doms-platform-maas-ops.iam.gserviceaccount.com"
          targetTags:
          sourceRanges:
          sourceServiceAccounts:
          - external: "ocp-app-node-paas@doms-platform-openshift-lle.iam.gserviceaccount.com"
          sourceTags:
          allow:
          - protocol: "tcp"
            ports:
            - "22"
            - "2181"
            - "9092"
            - "9094"
      ops-openshift-allow-maas-ingress:
        priority: 900
        direction: INGRESS
        description: SNOW-16108
        disabled: false
        logging: false
        rule:
          destinationRanges:
          targetServiceAccounts:
          targetTags:
          - paas-kafka
          - paas-zookeeper
          sourceRanges:
          - "10.191.8.0/23"
          - "10.187.10.0/23"
          sourceServiceAccounts:
          sourceTags:
          allow:
          - protocol: "tcp"
            ports:
            - "9092"
      openshift-lle-maas-ops-ingress:
        priority: 900
        direction: INGRESS
        description: SNOW-16482
        disabled: false
        logging: false
        rule:
          destinationRanges:
          targetServiceAccounts:
          targetTags:
          - paas-kafka
          - paas-zookeeper
          sourceRanges:
          - "10.186.0.0/23"
          - "10.190.0.0/23"
          sourceServiceAccounts:
          sourceTags:
          allow:
          - protocol: "tcp"
            ports:
            - "9094"
      inter-con-kafka-broker-maas-ops-ingress:
        priority: 900
        direction: INGRESS
        description: SNOW-16482
        disabled: false
        logging: false
        rule:
          destinationRanges:
          targetServiceAccounts:
          targetTags:
          - paas-kafka
          - paas-zookeeper
          sourceRanges:
          sourceServiceAccounts:
          sourceTags:
          - paas-kafka
          - paas-zookeeper
          allow:
          - protocol: "tcp"
            ports:
            - "9094"
            - "9091"
      gitlab-docker-runner-ingress-maas-ops:
        priority: 900
        direction: INGRESS
        description: SNOW-16710
        disabled: false
        logging: false
        rule:
          destinationRanges:
          targetServiceAccounts:
          - external: "kafkaplatform-msg@doms-platform-maas-ops.iam.gserviceaccount.com"
          targetTags:
          sourceRanges:
          - "10.185.13.0/24"
          - "10.189.8.0/24"
          sourceServiceAccounts:
          sourceTags:
          allow:
          - protocol: "tcp"
            ports:
            - "22"
            - "2181"
            - "9092"
